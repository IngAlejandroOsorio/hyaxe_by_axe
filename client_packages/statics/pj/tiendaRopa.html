<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hy AxE | Login</title>
    <link rel='stylesheet' href='./axe/bootstrap.min.css'>
    <link rel='stylesheet' href='./axe/axe.css'>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script src='../libs/jquery-3.3.1.min.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js" type="text/javascript"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script src="../libs/colorpalettepicker.js"></script>
    <style>
        html,
        body {
            height: 100%;
            background-color: rgba(128, 128, 128, 0);
        }
        .butt {
        background-color: rgba(26, 25, 25, 0.8);
        border: none; /* Remove borders */
        color: white; /* White text */
        padding: 12px 16px; /* Some padding */
        font-size: 16px; /* Set a font size */
        cursor: pointer; /* Mouse pointer on hover */
        }

        /* Darker background on mouse-over */
        .butt:hover {
          background-color: #68040e;
        }

        input.active[type=range]::-webkit-slider-thumb {

        border: 3px solid #000000;
        border-radius: 4px;
        background: #ffffff;
        margin-top: -8px; /* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */
        box-shadow: 3px 3px 3px #000000, 0px 0px 3px #0d0d0d; /* Add cool effects to your sliders! */
        }
    
    .alert {
      padding: .25rem 0.9rem !important;
    }
    .card-body {
      padding: 0.55rem !important;
    }

    </style>

</head>

<body>
    <!-- partial:index.partial.html -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2">
                <br>
                <center><img src="../img/logoaxe.png" class="img-fluid img-responsive"></center>
              <div id="navigate">
                <div class="card" style="background-color: rgba(26, 25, 25, 0.8)">
                        <div class="alert alert-primary" role="alert">
                                Parte de arriba
                              </div>
                        <div class="card-body text-white">
                                <label for="camisaTipo">Tipo <code></code></label>
                                <input type="range" class="custom-range move" min="0" max="44" step="1" oninput="topy(this.value)" onchange="topy(this.value)" id="camisaTipo"><br>
                                <div class="card-body text-white">
                                <label for="conjuntoAbajo">Solo Parte superior <code></code></label>
                                <input type="range" class="custom-range move" min="0" max="29" step="1" oninput="ropa_tipo(2,this.value)" onchange="ropa_tipo(2,this.value)" id="conjuntoAbajo"><br>
                                <label for="conjuntoArriba">Solo Parte inferior <code></code></label>
                                <input type="range" class="custom-range move" min="0" max="29" step="1" oninput="ropa_vari(this.value)" onchange="ropa_vari(this.value)" id="conjuntoArriba">
                                </div>
                                <br>
                                <label for="camisaTipo2">Hoodies / Vestidos <code></code></label>
                                <input type="range" class="custom-range move" min="0" max="28" step="1" oninput="ropa_tipo(1,this.value)" onchange="ropa_tipo(1,this.value)" id="camisaTipo2">                                
                        </div>
                  </div>
                  <br>
                  <div class="card" style="background-color: rgba(26, 25, 25, 0.8)">
                        <div class="alert alert-primary" role="alert">
                                Pecho
                              </div>
                        <div class="card-body text-white">
                                <label for="camisaTipo3">Tipo <code></code></label>
                                <input type="range" class="custom-range move" min="0" max="15" step="1" oninput="pecho_tipo(this.value)" onchange="pecho_tipo(this.value)" id="camisaTipo3"><br>                              
                        </div>
                  </div>
                  <br>
                  <div class="card" style="background-color: rgba(26, 25, 25, 0.8)">
                          <div class="alert alert-primary" role="alert">
                                  Pantalones
                                </div>
                          <div class="card-body text-white">
                                  <label for="pantalonesTipo">Largos <code></code></label>
                                  <input type="range" class="custom-range move" min="0" max="54" step="1" oninput="ropa_tipo(3,this.value)" onchange="ropa_tipo(3,this.value)" id="pantalonesTipo"><br>
                                  <label for="pantalonesTipo2">Cortos <code></code></label>
                                  <input type="range" class="custom-range move" min="0" max="11" step="1" oninput="ropa_tipo(4,this.value)" onchange="ropa_tipo(4,this.value)" id="pantalonesTipo2">
                          </div>
                    </div>
                    <br>
                    <div class="card" style="background-color: rgba(26, 25, 25, 0.8)">
                            <div class="alert alert-primary" role="alert">
                                    Zapatos
                                  </div>
                            <div class="card-body text-white">
                                    <label for="zapatosTipo">Zapatos <code></code></label>
                                    <input type="range" class="custom-range move" min="0" max="19" step="1" oninput="ropa_tipo(5,this.value)" onchange="ropa_tipo(5,this.value)" id="zapatosTipo"><br>
                                    <label for="zapatosTipo2">Deportivos <code></code></label>
                                    <input type="range" class="custom-range move" min="0" max="30" step="1" oninput="ropa_tipo(6,this.value)" onchange="ropa_tipo(6,this.value)" id="zapatosTipo2"><br>
                                    <label for="zapatosTipo3">Playa <code></code></label>
                                    <input type="range" class="custom-range move" min="0" max="3" step="1" oninput="ropa_tipo(7,this.value)" onchange="ropa_tipo(7,this.value)" id="zapatosTipo3">
                            </div>
                      </div>
                        <br>
                      <div class="card" style="background-color: rgba(26, 25, 25, 0.8)">
                              <div class="alert alert-primary" role="alert">
                                      Accesorios
                                    </div>
                              <div class="card-body text-white">
                                      <label for="zapasdtosTipo">Sombreros <code></code></label>
                                      <input type="range" class="custom-range move" min="0" max="34" step="1" oninput="sombrero(this.value)" onchange="sombrero(this.value)" id="zapasdtosTipo"><br>
                                      <label for="zapaatosTipo2">Mascaras <code></code></label>
                                      <input type="range" class="custom-range move" min="0" max="28" step="1" oninput="mascara(this.value)" onchange="mascara(this.value)" id="zapaatosTipo2"><br>
                                      <label for="zapatosTsipo3">Lentes <code></code></label>
                                      <input type="range" class="custom-range move" min="0" max="16" step="1" oninput="gafas(this.value)" onchange="gafas(this.value)" id="zapatosTsipo3">
                              </div>
                        </div>
                        <br>                        
                        <button id="crearBtn" class="btn btn-success btn-block move">Comprar Prendas</button>
                        <button id="volverBtn" class="btn btn-danger btn-block move">Cerrar</button>
              </div>
        
                        </div>
            

              <div class="col-md-8"></div>
              
              <div class="col-md-2">
                

              </div>
            </div>
            </div>
        </div>
    </div>

    <div class="modal fade text-white" id="modalError">
        <div class="modal-dialog">
          <div class="modal-content" style="background-color: rgba(26, 25, 25, 0.8)">
          
            <!-- Modal Header -->
            <div class="modal-header" style="background-color: rgba(26, 25, 25, 0.8)">
              <h4 class="modal-title"><font color="#FF4136">Error</font></h4>
              <button type="button" class="close" data-dismiss="modal"><font color="#FF4136">Ã—</font></button>
            </div>
            
            <!-- Modal body -->
            <div class="modal-body" style="background-color: rgba(26, 25, 25, 0.8)">
              <center>
                  <p id="mensajeError"></p>
                  <center><button type="button" class="btn btn-danger btn-block" data-dismiss="modal">Salir</button></center>
              </center>
            </div>
            
          </div>
        </div>
      </div>

<button id="modalerror" type="button" class="btn btn-primary" data-toggle="modal" style="display: none" data-target="#modalConfirmError">modal</button>
<button id="modalok" type="button" class="btn btn-primary" data-toggle="modal" style="display: none" data-target="#modalConfirmOk">modal</button>
      <!--Modal: modalConfirmDelete-->
<div class="modal fade" id="modalConfirmError" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-sm modal-notify modal-danger" role="document">
    <!--Content-->
    <div class="modal-content text-center">
      <!--Header-->
      <div class="modal-header d-flex justify-content-center">
        <p class="heading">Tienes un error con el nombre de tu Pj.</p>
      </div>

      <!--Footer-->
      <div class="modal-footer flex-center">
        <a type="button" class="btn  btn-danger2 " data-dismiss="modal">Ok</a>
      </div>
    </div>
    <!--/.Content-->
  </div>
</div>
<!--Modal: modalConfirmDelete-->

      <!--Modal: modalConfirmDelete-->
<div class="modal fade" id="modalConfirmOk" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-sm modal-notify modal-danger" role="document">
    <!--Content-->
    <div class="modal-content text-center">
      <!--Header-->
      <div class="modal-header d-flex justify-content-center">
        <p class="heading">Â¿Deseas Comprar las prendas por un valor de $500?</p>
      </div>

      <!--Footer-->
      <div class="modal-footer flex-center">
        <a href="" onclick="gogo()" class="btn btn-success btn-block">Si</a>
        <a type="button" class="btn  btn-danger2 waves-effect" data-dismiss="modal">No</a>
      </div>
    </div>
    <!--/.Content-->
  </div>
</div>
<!--Modal: modalConfirmDelete-->

    <script src="assets/js/character-clothes.js"></script>
    <script src="axe/data.js"></script>
    <script src="assets/js/colores.js"></script>
    <script>
        var current;
        var genero = 0;

        //Rasgos
        
        var ropaTipo = 0;
        var pechoTipo = 0;
        var pechoCol = 0;
        var ropaVari = 0;
        var alejar = -998.5422; 
        var alejar2 = -99.00404;
        var rot = 176.891;

        var costo = 0;
        var camisa = false;
        var pantalon = false;
        var zapatos = false;
        var costoPan = 0;
        var costoCam = 0;
        var costoZap = 0;

        function showError(error){
            document.getElementById("mensajeError").innerHTML = error;
            $("#modalError").modal();
        }

        $("#creator-pj").hide();
        $("#creator-face").hide();
        $("#creator-hair").hide();
        $("#creator-lips").hide();
        $("#creator-shirt").hide();
        $("#creator-jeans").hide();
        $("#creator-shoes").hide();


        function pecho_tipo(valu){
          pechoTipo = valu;
          selApariencia(10,pechoTipo);
        }
        
       
        function ropa_tipo(index,valu){
          ropaTipo = valu;
          SelRopa(index,ropaTipo);
        }

        function ropa_vari(valu){
          ropaVari = valu;
          SelRopa2(ropaVari);
        }

        function alejar_(valu){
          alejar = valu;
          alejar_cam(alejar,alejar2);
        }

        function alejar_2(valu){
          alejar2 = valu;
          alejar_cam(alejar,alejar2);
        }

        function set_rot(valu){
          rot = valu;
          rot_cam(rot);
        }

        $('#crearBtn').click(() => {
          mp.trigger("guardarCreador","tienda",costo);   
        });

        $('#volverBtn').click(() => {
            //console.log("volver");            
            mp.trigger("salirCreador");
        });


        // Funciones CEF -> Cliente Rage
        function topy(valor){
          valor = parseInt(valor);
         //mp.trigger("resource.Sounds.PlaySelectSound");
         //console.log("/ropa "+8+" "+data.tops[genero][valor].Undershirt+" "+0);
          //console.log("/ropa "+3+" "+data.tops[genero][valor].Torso+" "+0);
          //console.log("/ropa "+11+" "+data.tops[genero][valor].Top+" "+0);
          mp.trigger("SelRopaTop", JSON.stringify({   slot: 8, variation: data.tops[genero][valor].Undershirt, texture: 0}));
          mp.trigger("SelRopaTop", JSON.stringify({   slot: 3, variation: data.tops[genero][valor].Torso, texture: 0}));
          mp.trigger("SelRopaTop", JSON.stringify({   slot: 11, variation: data.tops[genero][valor].Top, texture: 0}));
        }

        function mascara(valor){
          valor = parseInt(valor);
          mp.trigger("SelRopaTop", JSON.stringify({   slot: 1, variation: data.masks[valor], texture: 0}));
        }

        function sombrero(valor){
          valor = parseInt(valor);
          console.log(data.hats[genero][valor]);
          //mp.trigger("SelProp", 0,data.hats[genero][valor],0);
        }

        function gafas(valor){
          valor = parseInt(valor);
          mp.trigger("SelProp", 1,data.glasses[genero][valor],0);
        }


        function selCara(index,valor){          
          //console.log("selCara cef->"+ index +" - "+ valor);
          mp.trigger("MoveCameraPosition", 0);
          mp.trigger("SetCaraC",index,valor);
        }

        function selApariencia(index,valor){          
          //console.log("selApa cef->"+ index +" - "+ valor);
          mp.trigger("SetApariencia",index,valor);
        }

        function selColores(peloTipo,peloCol,peloIlu,cejasCol,barbaCol,ojosCol,ruborCol,labiosCol,pechoCol){          
          //console.log("selApa cef->"+ index +" - "+ valor);
          
          mp.trigger("SetColores",peloTipo,peloCol,peloIlu,cejasCol,barbaCol,ojosCol,ruborCol,labiosCol,pechoCol);
        }

        function SelMaqui(tipo,color){          
          index = parseInt(tipo);
          valor = parseInt(color);
          
          mp.trigger("resource.Sounds.PlaySelectSound");
          //console.log("selCara cef->"+JSON.stringify({ tipo: index, color: color }));
          mp.trigger("SelMaquillaje", JSON.stringify({ tipo: index, color: color }));
        }

        function SelRopa(selected_item_type,current_item_variation){

          selected_item_type = parseInt(selected_item_type);
          current_item_variation = parseInt(current_item_variation);

          if (selected_item_type > 2 && selected_item_type < 5){
            pantalon = true;            
          } else if(selected_item_type > 4){
            zapatos = true;
          } else if(selected_item_type < 3){
            camisa = true;
          }else{
          }
          updatePrecio();

          mp.trigger("resource.Sounds.PlaySelectSound");          
          mp.trigger("SelRopaPj", JSON.stringify(character_components[genero][selected_item_type][current_item_variation]));
          //console.log(genero+" itemType: "+selected_item_type+" itemVaria: "+current_item_variation+JSON.stringify(character_components[genero][selected_item_type][current_item_variation]));

          if (selected_item_type == 2)
                    mp.trigger("SelRopaPj", JSON.stringify(character_components[genero][12][ropaVari]));              
        }

        function SelRopa2(ropa2){
          ropa = parseInt(ropa2);
          
          //console.log("selRopa2 cef->"+JSON.stringify(character_components[genero][12][ropa2]));
          mp.trigger("SelRopaPj", JSON.stringify(character_components[genero][12][ropa2]));              
        }

        function setGenero(gen){
          genero = parseInt(gen);
          if (genero == 0){
            $("#camisaTipo").attr('max', 52);
            console.log("top - hombre");
          }else{
            $("#camisaTipo").attr('max', 45);
            console.log("top - mujer");
          }
        }

        function logeo(cosa){
          console.log(cosa);
        }

        
        $('input[type=range]').on("change mousemove", function() {
            var label = $('label[for="' + $(this).attr('id') + '"]');
            label.find('code').text($(this).val());
        });        

var active = 0;
rePosition();

$(document).keydown(function(e){
    reCalculate(e);
    rePosition();
    return false;
});


function reCalculate(e){
    var rows = $('#navigate .move').length;
    var columns = $('#navigate .move:eq(0)').length;
    //alert(columns + 'x' + rows);
    
    if (e.keyCode == 37) { //move left or wrap
          $('input.active[type=range]').focus();
          $('input.active[type=range]').slider("value",$('input.active[type=range]').val() + 1)
          var val1 = parseInt($('input.active[type=range]').val());
          var val2 = val1 - 1;
          $('input.active[type=range]').val(val2);
          $('input.active[type=range]').change();
    }
    if (e.keyCode == 38) { // move up
        active = (active-columns>=0)?active-columns:active;
    }
    if (e.keyCode == 39) { // move right or wrap
          $('input.active[type=range]').focus();
          $('input.active[type=range]').slider("value",$('input.active[type=range]').val() + 1)
          var val1 = parseInt($('input.active[type=range]').val());
          var val2 = val1 + 1;
          $('input.active[type=range]').val(val2);
          $('input.active[type=range]').change();
    }
    if (e.keyCode == 40) { // move down
        active = (active+columns<=(rows*columns)-1)?active+columns:active;
    }
    if (e.keyCode == 13) {
        $('.active').click();
    }
    if (e.keyCode == 8) {
        mp.trigger("salirCreador");
    }
}

function rePosition(){
    $('.active').removeClass('active');
    $('#navigate .move').eq(active).addClass('active');
    scrollInView();
}

function scrollInView(){
    var target = $('#navigate .move:eq('+active+')');
    if (target.length)
    {
        var top = target.offset().top;
        
        $('html,body').stop().animate({scrollTop: top-300}, 400);
        return false;
    }
}

function updatePrecio(){
  if (pantalon){
    costoPan = 400;
  }else if (camisa){
    costoCam = 600;
  }else if (zapatos){
    costoZap = 500;
  }else{
    costoPan = 0;
    costoCam = 0;
    costoZap = 0;
  }
  costo = costoPan+costoCam+costoZap;
  $('#crearBtn').text("Comprar por $"+costo);
}

    </script>
    <!-- partial -->
    <script src='../libs/bootstrap.min.js'></script>
</body>

</html>